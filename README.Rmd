---
output: github_document
always_allow_html: true
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```


> üöß Warning
>
> Il s'agit d'une version de d√©veloppement


> üìò Info
>
> Les wrappers d'API sont des outils qui facilitent l'utilisation des fonctionnalit√©s offertes par une interface de programmation d'applications (API). Ils simplifient la communication entre une application et une API en g√©rant les d√©tails techniques et en offrant une interface plus conviviale. Les wrappers d'API permettent aux d√©veloppeurs de se concentrer sur la logique de leur application plut√¥t que sur les aspects techniques de l'int√©gration avec l'API. Ils acc√©l√®rent le d√©veloppement et am√©liorent la productivit√© en r√©duisant la quantit√© de code n√©cessaire.


Gr√¢ce √† `{r.apifoncier}` vous pouvez acc√©der aux donn√©es disponibles par l'[API donn√©es fonci√®res du cerema](https://apidf-preprod.cerema.fr/swagger/).


# Installation

Vous pouvez installer r.apifoncier depuis [GitHub](https://github.com/) avec le code suivant :

``` r
# install.packages("devtools")
devtools::install_github("rcadot/r.apifoncier")
```

# Indicateurs de consommation d'espace (acc√®s libre)

Les donn√©es sont disponibles √† deux √©chelles : communes et d√©partements.

En indiquant le code INSEE d'une commune au format `numeric` ou `character`, on obtient un dataframe des consommations.

```{r}
library(r.apifoncier)

ind_conso_espace_communes(59001)
```

La fonction `g_ind_conso_espace_communes()` permet de g√©n√©rer un graphique `{plotly}` de la consommation sur la commune de son choix.

```{r dpi=600}
ind_conso_espace_communes_g(59350)
```

Par d√©faut, les consommations sont affich√©es en hectares, mais on peut les indiquer en m¬≤ en choisissant `hectare=FALSE`.

```{r message=FALSE, warning=FALSE, dpi=600}
ind_conso_espace_communes_g(
  code_insee = 59350,
  hectare = FALSE,
  affichage = 'total',
  legende = FALSE
)
```

# Indicateurs de prix (acc√®s libre)

Les indicateurs de prix sont disponibles annuellement et de mani√®re triennale √† plusieurs √©chelles :

- R√©gions ;
- D√©partements ;
- Aires d'attractivit√©s des villes ;
- EPCI ; 
- Communes.

```{r}
ind_dv3f_com_annuel('59350') %>% 
  dplyr::select(1:10) # Le r√©sultat contient 617 colonnes
```


